# Production override for ANDO
# Usage: docker compose -f docker-compose.yml -f docker-compose.prod.yml up -d

services:
  # Frontend dev server - replace with dummy that exits immediately
  frontend:
    entrypoint: ["echo", "Production mode - frontend served by nginx"]
    restart: "no"

  # Production nginx config - serves static files
  nginx:
    ports:
      - "80:80"
      - "8001:8080"
    volumes:
      - ./docker/nginx/prod.conf:/etc/nginx/conf.d/default.conf:ro
      - ./docker/nginx/.htpasswd:/etc/nginx/.htpasswd:ro
      - ./dist:/var/www/html:ro
    depends_on:
      kong:
        condition: service_healthy
